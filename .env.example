# =============================================================================
# .env.example - Шаблон конфігурації для PowerBot
# =============================================================================
# Скопіюйте цей файл як .env і заповніть реальними значеннями
# НІКОЛИ не комітьте .env з реальними токенами!
# =============================================================================

# Telegram Bot Token від @BotFather
BOT_TOKEN="123456789:ABCdefGHIjklMNOpqrsTUVwxyz"

# Username бота (без @)
BOT_USERNAME="YourBotUsername"

# Web App (Mini App)
WEB_APP=0
WEB_APP_URL="https://new-england.morgan-dev.com/app"
SINGLE_MESSAGE_MODE=0

# Runtime logging (persistent files in container volume)
LOG_LEVEL="INFO"
LOG_DIR="/data/logs"
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=10

# Business mode (feature-flagged rollout)
# 0 = business features are hidden/disabled in main bot
# 1 = business features may be enabled (only with valid BUSINESS_BOT_API_KEY)
BUSINESS_MODE=0
# Telegram token for separate business bot (@BotFather)
BUSINESS_BOT_API_KEY=""

# Admin bot (separate Telegram bot for control-plane/admin UI)
# If empty, adminbot service will not be started.
ADMIN_BOT_API_KEY=""
# Keep admin-bot UI clean by editing one persistent inline-menu message
# and deleting user inputs (best-effort).
ADMIN_BOT_SINGLE_MESSAGE_MODE=1
# Internal runtime selector (set automatically by docker-compose service)
# APP_ENTRYPOINT=main.py | business_main.py

# Reverse proxy (Traefik)
# План A: один Traefik на сервері, маршрутизація по доменах через labels.
# Для test-стека: TRAEFIK_DOMAIN="test-new-england.morgan-dev.com", TRAEFIK_ROUTER="powerbot-test".
TRAEFIK_RULE="Host(`new-england.morgan-dev.com`) || Host(`sensors-new-england.morgan-dev.com`)"
TRAEFIK_ROUTER="powerbot-prod"
TRAEFIK_CERTRESOLVER="letsencrypt_http"
TRAEFIK_EMAIL="admin@example.com"
# Для DNS-01 (Cloudflare). Для HTTP-01 не потрібно.
TRAEFIK_DNS_PROVIDER="cloudflare"
CF_DNS_API_TOKEN=""
TRAEFIK_NETWORK="traefik"
TRAEFIK_DOCKER_API_VERSION="1.52"
#
# Для test-стека:
# TRAEFIK_RULE="Host(`test-new-england.morgan-dev.com`)"
# TRAEFIK_ROUTER="powerbot-test"

# ID адміністраторів (через кому)
ADMIN_IDS="123456789,987654321"

# Тег адміна для зворотного зв'язку
ADMIN_TAG="@YourAdminUsername"

# Координати для погоди (Open-Meteo, без ключа)
WEATHER_LAT="50.4501"
WEATHER_LON="30.5234"
WEATHER_API_URL="https://api.open-meteo.com/v1/forecast"
WEATHER_TIMEZONE="Europe/Kyiv"

# Телефони сервісів
SECURITY_PHONE="+380XXXXXXXXX"
PLUMBER_PHONE="+380XXXXXXXXX"
ELECTRICIAN_PHONE="+380XXXXXXXXX"
ELEVATOR_PHONES="+380XXXXXXXXX,+380XXXXXXXXX"

# API ключі для тривог
ALERTS_API_KEY="your_alerts_api_key_here"
ALERTS_IN_UA_API_KEY="your_alerts_in_ua_api_key_here"
ALERTS_CITY_ID_UKRAINEALARM="31"
ALERTS_CITY_UID_ALERTS_IN_UA="31"
ALERTS_API_URL="https://api.ukrainealarm.com/api/v3"
ALERTS_IN_UA_API_URL="https://api.alerts.in.ua/v1"
# 7 означає: 7 запитів до alerts.in.ua, потім 1 до ukrainealarm (~раз на 88 сек при інтервалі 11 сек)
ALERTS_IN_UA_RATIO=7

# === Yasno planned outages (Kyiv) ===
# У тестовому боті увімкнеться автоматично через deploy_test.sh
YASNO_ENABLED=0
YASNO_REGION_ID=25
YASNO_DSO_ID=902
YASNO_STREET_QUERY_DEFAULT="вул. Максимовича"

# Якщо HOUSE_QUERIES порожній — графіки для будинку не показуються.
YASNO_BUILDING_1_STREET_QUERY=
YASNO_BUILDING_1_HOUSE_QUERIES_SEC_1="24В"
YASNO_BUILDING_1_HOUSE_QUERIES_SEC_2="24В"
YASNO_BUILDING_1_HOUSE_QUERIES_SEC_3="24В"

YASNO_BUILDING_2_STREET_QUERY=
YASNO_BUILDING_2_HOUSE_QUERIES_SEC_1="28Б ввод 1|28Б ввод 2"
YASNO_BUILDING_2_HOUSE_QUERIES_SEC_2="28Б ввод 1|28Б ввод 2"
YASNO_BUILDING_2_HOUSE_QUERIES_SEC_3="28Б ввод 1|28Б ввод 2"

YASNO_BUILDING_3_STREET_QUERY=
YASNO_BUILDING_3_HOUSE_QUERIES_SEC_1="26 ввод 1|26 ввод 2"
YASNO_BUILDING_3_HOUSE_QUERIES_SEC_2="26 ввод 1|26 ввод 2"
YASNO_BUILDING_3_HOUSE_QUERIES_SEC_3="26 ввод 1|26 ввод 2"

YASNO_BUILDING_4_STREET_QUERY=
YASNO_BUILDING_4_HOUSE_QUERIES_SEC_1="24А ввод 1|24А ввод 2"
YASNO_BUILDING_4_HOUSE_QUERIES_SEC_2="24А ввод 1|24А ввод 2"
YASNO_BUILDING_4_HOUSE_QUERIES_SEC_3="24А ввод 1|24А ввод 2"

YASNO_BUILDING_5_STREET_QUERY=
YASNO_BUILDING_5_HOUSE_QUERIES_SEC_1="24-Б ввод 1|24-Б ввод 2"
YASNO_BUILDING_5_HOUSE_QUERIES_SEC_2="24-Б ввод 1|24-Б ввод 2"
YASNO_BUILDING_5_HOUSE_QUERIES_SEC_3="24-Б ввод 1|24-Б ввод 2"

YASNO_BUILDING_6_STREET_QUERY=
YASNO_BUILDING_6_HOUSE_QUERIES_SEC_1="24В"
YASNO_BUILDING_6_HOUSE_QUERIES_SEC_2="24В"
YASNO_BUILDING_6_HOUSE_QUERIES_SEC_3="24В"

YASNO_BUILDING_7_STREET_QUERY=
YASNO_BUILDING_7_HOUSE_QUERIES_SEC_1="24В"
YASNO_BUILDING_7_HOUSE_QUERIES_SEC_2="24В"
YASNO_BUILDING_7_HOUSE_QUERIES_SEC_3="24В"

YASNO_BUILDING_8_STREET_QUERY=
YASNO_BUILDING_8_HOUSE_QUERIES_SEC_1="26Г"
YASNO_BUILDING_8_HOUSE_QUERIES_SEC_2="26Г"
YASNO_BUILDING_8_HOUSE_QUERIES_SEC_3="26Г"

YASNO_BUILDING_9_STREET_QUERY=
YASNO_BUILDING_9_HOUSE_QUERIES_SEC_1="26В"
YASNO_BUILDING_9_HOUSE_QUERIES_SEC_2="26В"
YASNO_BUILDING_9_HOUSE_QUERIES_SEC_3="26В"

YASNO_BUILDING_10_STREET_QUERY=
YASNO_BUILDING_10_HOUSE_QUERIES_SEC_1="28Е"
YASNO_BUILDING_10_HOUSE_QUERIES_SEC_2="28Е"
YASNO_BUILDING_10_HOUSE_QUERIES_SEC_3="28Е"

YASNO_BUILDING_11_STREET_QUERY=
YASNO_BUILDING_11_HOUSE_QUERIES_SEC_1="26В"
YASNO_BUILDING_11_HOUSE_QUERIES_SEC_2="26В"
YASNO_BUILDING_11_HOUSE_QUERIES_SEC_3="26В"

YASNO_BUILDING_12_STREET_QUERY=
YASNO_BUILDING_12_HOUSE_QUERIES_SEC_1="24В"
YASNO_BUILDING_12_HOUSE_QUERIES_SEC_2="24В"
YASNO_BUILDING_12_HOUSE_QUERIES_SEC_3="24В"

YASNO_BUILDING_13_STREET_QUERY=
YASNO_BUILDING_13_HOUSE_QUERIES_SEC_1="26В"
YASNO_BUILDING_13_HOUSE_QUERIES_SEC_2="26В"
YASNO_BUILDING_13_HOUSE_QUERIES_SEC_3="26В"

YASNO_BUILDING_14_STREET_QUERY=
YASNO_BUILDING_14_HOUSE_QUERIES_SEC_1=
YASNO_BUILDING_14_HOUSE_QUERIES_SEC_2=
YASNO_BUILDING_14_HOUSE_QUERIES_SEC_3=

# Параметри масових розсилок (rate limit)
BROADCAST_RATE_PER_SEC=20
BROADCAST_CONCURRENCY=8
BROADCAST_MAX_RETRIES=1

# ESP32 сенсори
# Всередині контейнера API_PORT=8081. Зовні можна мапити інший порт.
API_PORT=8081
SENSOR_API_KEY="your-64-char-hex-key"
SENSOR_TIMEOUT_SEC=150
SENSORS_DOMAIN="sensors-new-england.morgan-dev.com"

# Шлях до БД (потрібно для Docker з bind-mount)
DB_PATH="/data/state.db"
